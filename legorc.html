<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Player</title>
    <script type="text/javascript">
window.onload = function () {
    var conn;

   
    var left = document.getElementById("left");
    left.addEventListener('input', function() {
      console.log("Left: " + left.value);
      sendCommand(left.value, right.value);
    }, false);
    var right = document.getElementById("right");
    right.addEventListener('input', function() {
      console.log("Right: " + right.value)
      sendCommand(left.value, right.value);
    }, false);


    function sendCommand(leftValue, rightValue) {
      conn.send(leftValue + "," + rightValue);
      console.log(leftValue + "," + rightValue);
    }
    //

    if (window["WebSocket"]) {
        conn = new WebSocket("ws://" + document.location.host + "/ws");
        conn.onclose = function (evt) {
            console.log("Closed")
        };
        conn.onmessage = function (evt) {
            console.log("Message received")
            var messages = evt.data.split('\n');
        };
    } else {
        var item = document.createElement("div");
        console.log("Your browser does not support WebSockets.");
    }
};
</script>
  </head>
  <body>
    <div>
      <img src="http://" + document.location.host + ":8080">
    </div>
    <div>
      <input id="left" type="range" min="-7" max="7" step="1">
      <input id="right" type="range" min="-7" max="7" step="1">
    </div>
  </body>
</html>
